<!DOCTYPE HTML>
<html>

<head>
  <meta charset="UTF-8">
  <title>Snap!</title>
  <script type="text/javascript" src="main.js"></script>
  <link rel="stylesheet" href="main.css">
  <meta name="viewport" content="width=device-width, initial-scale=1" />
</head>

<body>
    <div id="myapp"></div>
</body>

<script type="text/javascript">

// Start the Elm application.
var app = Elm.Main.init({
    node: document.getElementById('myapp')
});

app.ports.connect.subscribe((uri) => {
  let socket = new WebSocket(uri);
  app.ports.sendMessage.subscribe((msg) => socket.send(msg));
  socket.addEventListener(
    "message",
    (event) => app.ports.messageReceived.send(event.data)
  );
  socket.addEventListener(
    "close",
    (_event) => app.ports.connectionLost.send(null)
  );
  socket.addEventListener(
    "open",
    (_event) => app.ports.connectionStarted.send(null)
  );
});
</script>


</html>
